# Quasar App (quasar-typescript-starter)

Most of the stuff is copied from TypeScript app-extension to which I previously contributed.
Especially webpack configuration extension has been taken from there and I cannot guarantee it's the best way to manage it, not having done it myself, but it works.

## Notes

Current setup is meant to work with normal, PWA and Electron modes and has not been tried with Cordova.

---

ESLint has been setup with Prettier enabled.
Everything should work with ESLint 6 too (I'm using it in a project), but default installed version is < 6 so I left it untouched.
See [here](https://github.com/quasarframework/app-extension-typescript/blob/dev/extension/src/templates/noprettier/_eslintrc.js) for Prettier-free version.

Note that there are still some problems with `@typescript-eslint` and Vue linting. I documented them [here](https://github.com/quasarframework/app-extension-typescript/issues/23#issuecomment-522530591), but they need work by upstream packages.
If you have some contacts with Vue core team, it could be a good thing to bring their focus on these problems, because to workaround it we are forced to move into a DFC (Double File Component) instead of a SFC and disabling linting for `.vue` files into webpack process.

Into `.eslintrc.js`:

- `'vue/component-name-in-template-casing': ['error', 'kebab-case']` enforces kebab-case, but it should probably be defined based on user preferences, given the recent Quasar addition which allows to choose components casing into templates;
- `@typescript-eslint/explicit-function-return-type` rule is turned off because I personally think that rule is too restrictive and verbose, but it has its benefits and should probably be left enabled and check what the community prefer (maybe leave it, but commented and with an explanation;)

---

Into `tsconfig.json`:

- `"noEmit": true` is needed to address [this problem](https://github.com/quasarframework/app-extension-typescript/issues/36). It will work also by adding `"outDir": "./dist"` and excluding `dist` folder. Explanations can be found via links inside the issue.
- `"experimentalDecorators": true` is needed only if using `vue-class-component` component syntax.
- `"resolveJsonModule": true` is needed only if importing JSON files into TS ones.
- `"esModuleInterop": true` is needed to better manage non-TS libraries.

---

Into `quasar.config.json`:

- `fork-ts-checker-webpack-plugin` is used by default without asking to the end-user (in the app-extension a prompt was shown). As I have understood this solution is the fastest because it runs the type checker in a parallel process, but require the user to properly setup its `tsconfig.json` to include all files to check, while the original `ts-loader` relies on webpack's module resolutions to know which files should be checkd and must wait for webpack to finish its job. [Reference](https://github.com/TypeStrong/fork-ts-checker-webpack-plugin). There seems to be [a regression](https://github.com/TypeStrong/fork-ts-checker-webpack-plugin/issues/339) with new versions of the plugin, whose typings relies on `webpack` and `tapable` ones. I manually added `@types/webpack` and `@types/tapable` as devDependencies to workaround it.

---

`.vscode` folder and its files should be added only when using VSCode I guess? Probably the user should be prompted about this, I have no real solution to avoid littering the repo with random config without user interaction ([here](https://github.com/quasarframework/app-extension-typescript/blob/dev/extension/src/install.js) is how it works in current app-extension);

`"vetur.format.defaultFormatter.html": "prettier"` should be added only when using Prettier.

---

`quasar-shims` is helpful to get better typings for `QuasarPlugin`, but all files inside there are a pain in the ass to maintain, being manually derived from JSON files used.
Given that options they types are used rarely (only in unit-tests in my experience) you can safely avoid to add them and just leave the `any` in the current interface, if there is no way to derive them automatically.

---

All script files generated by the CLI (except config ones like ESLint and Babel) should be generated as `.ts` instead of `.js`.
This includes boot files, i18n files, vuex files, new components/pages/layouts, etc.

---

New components should be generated based a user chosen default component style. Component with different styles can work together without problems AFAIK, but some requires particular libraries to be installed. Prompting the user to chose which one he wants could be an idea, adding all of them altogether another one.
The component style could also be defined via an option on `quasar new component` command, like `--style=<composition|class|object>`

Component styles:

- [Composition API](https://github.com/vuejs/composition-api): currently available as a plugin to Vue2, it will be the official way to have TS support. It's currently in `0.x` stage, pretty stable but still fails on some edge cases. I've been using it for some time and helping pin-point some edge cases. When Vue3 will be released, it will become the new standard, it will be enbedded into the core and the library won't be needed anymore.
- [Classes](https://github.com/vuejs/vue-class-component) and [Decorators](https://github.com/kaorun343/vue-property-decorator): current most used TS solution so far, it heavily relies on Decorators which aren't still a well defined standard. Decorators proposal is having some hard times, going back and forth between T39 stages. It will still be supported in Vue3, but from what I read it won't have the core team focus anymore.
- Object mode: good old plain object notation. Can be used with TS, but it requires a lot of typings overhead and quirks to get it right, not recommended.

// TODO: I put an example object and a possible template of every style into the repo to show them off.

---

Missing types:

- `quasar.config.js` could maybe be transformed into a `ts` file, adding typings both for `ctx` main parameter and `cfg` webpack extension parameter.

---

[Fast link](https://github.com/quasarframework/app-extension-typescript/issues) to the list of issues to look out for after adding TS support into core package.
